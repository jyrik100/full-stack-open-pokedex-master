name: Cypress test
on:
  push:
    branches:
      - master
  pull_request:    
    branches: [master]    
    types: [opened, synchronize]
jobs:
 cypress-run:
  runs-on: ubuntu-latest
  steps: 
   - name: Checkout
     uses: actions/checkout@v2.3.4
   - name: Cypress.io
     uses: cypress-io/github-action@v2.9.7
     with: 
          start: npm start 
   - name: deploy to heroku
     if: ${{ github.event_name == 'push' }}
     uses: AkhileshNS/heroku-deploy@v3.12.12
 tag_release:
    needs: [cypress-run]
    runs-on: ubuntu-latest
    steps: 
      - name: Bump version and push tag
        if: ${{ github.event_name == 'push' }}
        uses: anothrNick/github-tag-action@1.36.0
        env:
         GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
       
       
